@echo off

if ##%1## == #### (
	echo pass the folder containing HEVD source.
	exit /B 1
)

echo #pragma once> ioctls.hpp
echo.>> ioctls.hpp
echo // from ntddk.h>> ioctls.hpp
echo #define FILE_DEVICE_UNKNOWN             0x00000022^ >> ioctls.hpp
echo #define METHOD_NEITHER                  3^ >> ioctls.hpp
echo #define FILE_ANY_ACCESS                 0^ >> ioctls.hpp
echo #define CTL_CODE( DeviceType, Function, Method, Access ) (                 \>> ioctls.hpp
echo     ((DeviceType) ^<^< 16) ^| ((Access) ^<^< 14) ^| ((Function) ^<^< 2) ^| (Method) \>> ioctls.hpp
echo )>> ioctls.hpp
echo.>> ioctls.hpp
echo #define IOCTL(Function) CTL_CODE(FILE_DEVICE_UNKNOWN, Function, METHOD_NEITHER, FILE_ANY_ACCESS)>> ioctls.hpp
echo.>> ioctls.hpp
type %1\HackSysExtremeVulnerableDriver.h | grep "#define HEVD_IOCTL_" >> ioctls.hpp

echo ioctls.hpp written
